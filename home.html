<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MusAIc - Feel the Music of Your Mood</title>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="robots" content="index,follow">
  <meta name="generator" content="GrapesJS Studio">
  <script src="https://cdn.tailwindcss.com"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.querySelector(".mood-form");
  const resultText = document.querySelector(".result-text");
  const resultSubtext = document.querySelector(".result-subtext");
  const resultSection = document.getElementById("imjqu");

  if (form) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const moodInput = document.getElementById("mood-input").value;

      if (!moodInput) return;

      // Call Python backend
      const result = await window.pywebview.api.analyze_mood(moodInput);

      if (result.error) {
        resultText.textContent = "‚ö†Ô∏è " + result.error;
        resultSubtext.textContent = "Try entering another mood.";
      } else {
        resultText.textContent = `üß† Mood: ${result.mood} (${result.confidence})`;
        resultSubtext.innerHTML =
          `üéµ ${result.song}<br>üéØ Query: ${result.query}<br>` +
          `<a href="${result.url}" target="_blank" class="submit-button" style="text-decoration:none; display:inline-block; margin-top:1rem;">üéµ Play on Spotify</a>`;
      }

      // üëá Auto-scroll to Detected Mood section
      resultSection.scrollIntoView({ behavior: "smooth" });
    });
  }

  // Face recognition button placeholder
  const faceBtn = document.querySelector(".activate-recognition-button");
  if (faceBtn) {
    faceBtn.addEventListener("click", async () => {
      const res = await window.pywebview.api.facial_recognition();
      alert(res.message);
    });
  }
});


</script>

  <link rel="stylesheet" href="./style.css">
  </head>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.querySelector(".mood-form");
  const resultText = document.querySelector(".result-text");
  const resultSubtext = document.querySelector(".result-subtext");
  const resultSection = document.getElementById("imjqu");
  const video = document.getElementById("video-feed");

  // ---- Manual Mood Entry ----
  if (form) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const moodInput = document.getElementById("mood-input").value;
      if (!moodInput) return;

      const result = await window.pywebview.api.analyze_mood(moodInput);

      if (result.error) {
        resultText.textContent = "‚ö†Ô∏è " + result.error;
        resultSubtext.textContent = "Try entering another mood.";
      } else {
        resultText.textContent = `üß† Mood: ${result.mood} (${result.confidence})`;
        resultSubtext.innerHTML =
          `üéµ ${result.song}<br>üéØ Query: ${result.query}<br>` +
          `<a href="${result.url}" target="_blank" class="submit-button" style="text-decoration:none; display:inline-block; margin-top:1rem;">üéµ Play on Spotify</a>`;
      }

      resultSection.scrollIntoView({ behavior: "smooth" });
    });
  }

  // ---- Face Recognition ----
  const faceBtn = document.querySelector(".activate-recognition-button");
  if (faceBtn) {
    faceBtn.addEventListener("click", async () => {
      try {
        // start webcam
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
        video.style.display = "block";

        // wait 5s then capture
        setTimeout(async () => {
          const canvas = document.createElement("canvas");
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(video, 0, 0);

          // stop stream
          stream.getTracks().forEach(track => track.stop());
          video.style.display = "none";  // hide preview

          // send image to python
          const imageData = canvas.toDataURL("image/jpeg");
          const result = await window.pywebview.api.facial_recognition(imageData);

          if (result.error) {
            resultText.textContent = "‚ö†Ô∏è " + result.error;
            resultSubtext.textContent = "Try again with better lighting.";
          } else {
            resultText.textContent = `üß† Mood: ${result.mood}`;
            resultSubtext.innerHTML =
              `üéµ ${result.song}<br>üéØ Query: ${result.query}<br>` +
              `<a href="${result.url}" target="_blank" class="submit-button" style="margin-top:1rem;">üéµ Play on Spotify</a>`;
          }

          resultSection.scrollIntoView({ behavior: "smooth" });
        }, 5000);

      } catch (err) {
        alert("Camera access denied or unavailable.");
      }
    });
  }
});
</script>


  <body id="irqr" class="gjs-t-body cls-7gq1s9"><main id="ipso1" class="main-content"><section class="musaic-header" id="iemte"><div class="header-container"><div class="logo-wrapper"><img src="https://api.iconify.design/mdi:music-circle-outline.svg?color=%234ade80&width=56&height=56" alt="MusAIc Logo" class="musaic-logo"/><div class="logo-glow"></div></div><h1 class="musaic-title">MusAIc</h1></div></section><link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap" rel="stylesheet"/><section id="iwy3x" class="hero-section"><h2 id="iq9xi" class="hero-title">Feel the Music of Your Mood</h2><p id="ihd79" class="hero-subtitle">Discover music that matches your emotions through AI-powered mood detection</p></section><section id="iu4ly" class="mood-input-section"><div id="ipztb" class="input-container"><img src="https://api.iconify.design/mdi:music-note.svg?color=%234ade80&width=40&height=40" alt="Music note" id="ihsa4" class="section-icon"/><h3 id="iqhsv" class="section-title">Manual Mood Entry</h3><form method="get" id="i8j9j" class="mood-form"><div id="i20hh"><label for="mood-input" id="i9u3j" class="input-label">Enter your mood</label><input type="text" id="mood-input" name="mood" placeholder="Happy, Sad, Energetic..." class="mood-input"/></div><button type="submit" id="i44qe" class="submit-button"><img src="https://api.iconify.design/mdi:music-circle.svg?color=%23ffffff&width=20&height=20" alt="Music icon" id="itojn" class="button-icon"/>
          Submit Mood
        </button></form></div></section><section id="is534" class="face-recognition-section"><div id="itb1f" class="recognition-container"><img src="https://api.iconify.design/mdi:face-recognition.svg?color=%234ade80&width=40&height=40" alt="Face recognition" id="i71aa" class="section-icon"/><h3 id="ixdol" class="section-title">Face Recognition</h3><div id="iojvn" class="recognition-controls"><button type="button" id="i7caa" class="activate-recognition-button"><img src="https://api.iconify.design/mdi:headphones.svg?color=%23ffffff&width=20&height=20" alt="Face icon" id="ivpkp" class="button-icon"/>
          Activate Face Recognition
        </button><div id="iid5h" class="video-feed-container">
  <video id="video-feed" autoplay playsinline width="320" height="240" 
         class="rounded-lg shadow-md"></video>
</div>
</div></div></section><section id="imjqu" class="mood-result-section"><div id="ipyuw" class="result-container"><img src="https://api.iconify.design/mdi:music-box-multiple.svg?color=%234ade80&width=40&height=40" alt="Music box" id="i8s1z" class="section-icon"/><h3 id="i6aet" class="section-title">Detected Mood</h3><div id="ipeud" class="result-display"><img src="https://api.iconify.design/mdi:emoticon-outline.svg?color=%234ade80&width=64&height=64" alt="Mood icon" id="iofwa" class="mood-icon"/><p id="inlj4" class="result-text">No mood detected yet</p><p id="i7wp8" class="result-subtext">Enter your mood manually or use face recognition</p></div></div></section><!-- Background music icons --><div id="ii11g" class="bg-music-icon bg-icon-1"><img src="https://api.iconify.design/mdi:music-note-eighth.svg?color=%230a2e1a&width=60&height=60" alt="Music note" id="if9z9"/></div><div id="itrw8" class="bg-music-icon bg-icon-2"><img src="https://api.iconify.design/mdi:music-note-quarter.svg?color=%230a2e1a&width=80&height=80" alt="Music note" id="iih46"/></div><div id="i5s7n" class="bg-music-icon bg-icon-3"><img src="https://api.iconify.design/mdi:headphones.svg?color=%230a2e1a&width=70&height=70" alt="Headphones" id="ixk79"/></div><div id="is0rf" class="bg-music-icon bg-icon-4"><img src="https://api.iconify.design/mdi:waveform.svg?color=%230a2e1a&width=120&height=120" alt="Waveform" id="ifm3h"/></div><div id="ik331" class="bg-music-icon bg-icon-5"><img src="https://api.iconify.design/mdi:music-note-sixteenth.svg?color=%230a2e1a&width=50&height=50" alt="Music note" id="i3k4f"/></div><div id="iqkjl" class="bg-music-icon bg-icon-6"><img src="https://api.iconify.design/mdi:microphone.svg?color=%230a2e1a&width=65&height=65" alt="Microphone" id="i43lv"/></div><div id="ie2l7" class="bg-music-icon bg-icon-7"><img src="https://api.iconify.design/mdi:piano.svg?color=%230a2e1a&width=100&height=100" alt="Piano" id="ipnot"/></div><div id="i7fo2r" class="bg-music-icon bg-icon-8"><img src="https://api.iconify.design/mdi:guitar-acoustic.svg?color=%230a2e1a&width=90&height=90" alt="Guitar" id="i54rpp"/></div><!-- Background glow effects --><div id="iybzrz" class="bg-glow bg-glow-1"></div><div id="i1mh5f" class="bg-glow bg-glow-2"></div><div id="ixhhd2" class="bg-glow bg-glow-3"></div></main></body>
</html>
